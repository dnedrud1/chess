require_relative '../lib/game'

describe Chess do
  
  let(:chess_game) { Chess.new }

  describe '#initialize' do
    let(:pawns) { chess_game.pieces.select { |i| i.class == Pawn } }
    let(:rooks) { chess_game.pieces.select { |i| i.class == Rook } }
    let(:bishops) { chess_game.pieces.select { |i| i.class == Bishop } }
    let(:knights) { chess_game.pieces.select { |i| i.class == Knight } }
    let(:queens) { chess_game.pieces.select { |i| i.class == Queen } }
    let(:kings) { chess_game.pieces.select { |i| i.class == King } }
    
    it 'initializes with correct number of pieces' do
      expect(chess_game.pieces.count).to eql 32
    end
    it 'has correct number of each piece type' do
      expect(pawns.count).to eql 16
      expect(rooks.count).to eql 4
      expect(bishops.count).to eql 4
      expect(knights.count).to eql 4
      expect(queens.count).to eql 2
      expect(kings.count).to eql 2
    end
    it 'has correct number of each piece color' do
      expect(chess_game.white_pieces.count).to eql 16
      expect(chess_game.black_pieces.count).to eql 16
    end
  end

end
